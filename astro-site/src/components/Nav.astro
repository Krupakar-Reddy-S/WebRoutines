---
interface Props {
  activePage: 'home' | 'docs' | 'privacy';
}

const { activePage } = Astro.props;

const navLinks = [
  { id: 'home', label: 'Home', href: '/' },
  { id: 'docs', label: 'Docs', href: '/docs/' },
  { id: 'privacy', label: 'Privacy', href: '/privacy/' },
];
---

<header class="sticky top-0 z-20 border-b border-surface-border bg-base/80 backdrop-blur-sm">
  <div class="mx-auto flex w-full max-w-[1400px] items-center justify-between px-6 py-4">
    <a href="/" class="flex items-center gap-2.5 font-display text-base font-semibold tracking-tight text-fg">
      <img src="/icon-placeholder-128.svg" alt="" class="h-7 w-7" />
      WebRoutines
    </a>
    <nav class="flex items-center gap-1 text-sm">
      {navLinks.map((link) => (
        <a
          href={link.href}
          class:list={[
            'rounded-md px-3 py-1.5 transition-colors',
            link.id === activePage
              ? 'bg-surface text-fg'
              : 'text-fg-muted hover:bg-surface hover:text-fg',
          ]}
        >
          {link.label}
        </a>
      ))}
      <a
        href="https://github.com/Krupakar-Reddy-S/WebRoutines"
        target="_blank"
        rel="noopener noreferrer"
        class="rounded-md px-3 py-1.5 text-fg-muted transition-colors hover:bg-surface hover:text-fg"
        aria-label="GitHub"
      >
        <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/></svg>
      </a>
      <button
        id="theme-toggle"
        class="rounded-md px-2.5 py-1.5 text-fg-muted transition-colors hover:bg-surface hover:text-fg"
        aria-label="Toggle theme"
      >
        <!-- Sun icon (shown in dark mode) -->
        <svg class="h-5 w-5 theme-icon-sun" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><path stroke-linecap="round" d="M12 1v2m0 18v2m-7.07-2.93l1.41-1.41m9.9-9.9l1.41-1.41M1 12h2m18 0h2M4.93 4.93l1.41 1.41m9.9 9.9l1.41 1.41"/></svg>
        <!-- Moon icon (shown in light mode) -->
        <svg class="h-5 w-5 theme-icon-moon hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
      </button>
    </nav>
  </div>
</header>

<script>
  function updateIcons() {
    const isLight = document.documentElement.getAttribute('data-theme') === 'light';
    document.querySelectorAll('.theme-icon-sun').forEach(el => el.classList.toggle('hidden', isLight));
    document.querySelectorAll('.theme-icon-moon').forEach(el => el.classList.toggle('hidden', !isLight));
  }

  updateIcons();

  document.getElementById('theme-toggle')?.addEventListener('click', () => {
    const isLight = document.documentElement.getAttribute('data-theme') === 'light';
    const next = isLight ? 'dark' : 'light';
    document.documentElement.setAttribute('data-theme', next);
    localStorage.setItem('theme', next);
    updateIcons();
  });
</script>
